{"dependencies":[{"name":"NativeEventEmitter","isAsync":false},{"name":"NativeModules","isAsync":false},{"name":"fbjs/lib/invariant","isAsync":false},{"name":"logError","isAsync":false},{"name":"fbjs/lib/warning","isAsync":false},{"name":"Platform","isAsync":false},{"name":"PermissionsAndroid","isAsync":false}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, module, exports, _dependencyMap) {\n  'use strict';\n\n  var NativeEventEmitter = _$$_REQUIRE(_dependencyMap[0], 'NativeEventEmitter');\n\n  var RCTLocationObserver = _$$_REQUIRE(_dependencyMap[1], 'NativeModules').LocationObserver;\n\n  var invariant = _$$_REQUIRE(_dependencyMap[2], 'fbjs/lib/invariant');\n\n  var logError = _$$_REQUIRE(_dependencyMap[3], 'logError');\n\n  var warning = _$$_REQUIRE(_dependencyMap[4], 'fbjs/lib/warning');\n\n  var LocationEventEmitter = new NativeEventEmitter(RCTLocationObserver);\n\n  var Platform = _$$_REQUIRE(_dependencyMap[5], 'Platform');\n\n  var PermissionsAndroid = _$$_REQUIRE(_dependencyMap[6], 'PermissionsAndroid');\n\n  var subscriptions = [];\n  var updatesEnabled = false;\n  var Geolocation = {\n    setRNConfiguration: function setRNConfiguration(config) {\n      if (RCTLocationObserver.setConfiguration) {\n        RCTLocationObserver.setConfiguration(config);\n      }\n    },\n    requestAuthorization: function requestAuthorization() {\n      RCTLocationObserver.requestAuthorization();\n    },\n    getCurrentPosition: function getCurrentPosition(geo_success, geo_error, geo_options) {\n      var hasPermission, status;\n      return regeneratorRuntime.async(function getCurrentPosition$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              invariant(typeof geo_success === 'function', 'Must provide a valid geo_success callback.');\n              hasPermission = true;\n\n              if (!(Platform.OS === 'android' && Platform.Version >= 23)) {\n                _context.next = 11;\n                break;\n              }\n\n              _context.next = 5;\n              return regeneratorRuntime.awrap(PermissionsAndroid.check(PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION));\n\n            case 5:\n              hasPermission = _context.sent;\n\n              if (hasPermission) {\n                _context.next = 11;\n                break;\n              }\n\n              _context.next = 9;\n              return regeneratorRuntime.awrap(PermissionsAndroid.request(PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION));\n\n            case 9:\n              status = _context.sent;\n              hasPermission = status === PermissionsAndroid.RESULTS.GRANTED;\n\n            case 11:\n              if (hasPermission) {\n                RCTLocationObserver.getCurrentPosition(geo_options || {}, geo_success, geo_error || logError);\n              }\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this);\n    },\n    watchPosition: function watchPosition(success, error, options) {\n      if (!updatesEnabled) {\n        RCTLocationObserver.startObserving(options || {});\n        updatesEnabled = true;\n      }\n\n      var watchID = subscriptions.length;\n      subscriptions.push([LocationEventEmitter.addListener('geolocationDidChange', success), error ? LocationEventEmitter.addListener('geolocationError', error) : null]);\n      return watchID;\n    },\n    clearWatch: function clearWatch(watchID) {\n      var sub = subscriptions[watchID];\n\n      if (!sub) {\n        return;\n      }\n\n      sub[0].remove();\n      var sub1 = sub[1];\n      sub1 && sub1.remove();\n      subscriptions[watchID] = undefined;\n      var noWatchers = true;\n\n      for (var ii = 0; ii < subscriptions.length; ii++) {\n        if (subscriptions[ii]) {\n          noWatchers = false;\n        }\n      }\n\n      if (noWatchers) {\n        Geolocation.stopObserving();\n      }\n    },\n    stopObserving: function stopObserving() {\n      if (updatesEnabled) {\n        RCTLocationObserver.stopObserving();\n        updatesEnabled = false;\n\n        for (var ii = 0; ii < subscriptions.length; ii++) {\n          var sub = subscriptions[ii];\n\n          if (sub) {\n            warning(false, 'Called stopObserving with existing subscriptions.');\n            sub[0].remove();\n            var sub1 = sub[1];\n            sub1 && sub1.remove();\n          }\n        }\n\n        subscriptions = [];\n      }\n    }\n  };\n  module.exports = Geolocation;\n});","map":[[2,0,11,0],[4,0,13,0],[4,6,13,6,"NativeEventEmitter"],[4,27,13,27,"require"],[4,58,13,35],[4,78,13,27],[4,79,13,0],[6,0,14,0],[6,6,14,6,"RCTLocationObserver"],[6,28,14,28,"require"],[6,59,14,36],[6,74,14,28],[6,76,14,53,"LocationObserver"],[6,92,14,0],[8,0,16,0],[8,6,16,6,"invariant"],[8,18,16,18,"require"],[8,49,16,26],[8,69,16,18],[8,70,16,0],[10,0,17,0],[10,6,17,6,"logError"],[10,17,17,17,"require"],[10,48,17,25],[10,58,17,17],[10,59,17,0],[12,0,21,0],[12,6,21,6,"warning"],[12,16,21,16,"require"],[12,47,21,24],[12,65,21,16],[12,66,21,0],[14,0,23,0],[14,6,23,6,"LocationEventEmitter"],[14,29,23,29],[14,33,23,33,"NativeEventEmitter"],[14,51,23,29],[14,52,23,52,"RCTLocationObserver"],[14,71,23,29],[14,72,23,0],[16,0,25,0],[16,6,25,6,"Platform"],[16,17,25,17,"require"],[16,48,25,25],[16,58,25,17],[16,59,25,0],[18,0,26,0],[18,6,26,6,"PermissionsAndroid"],[18,27,26,27,"require"],[18,58,26,35],[18,78,26,27],[18,79,26,0],[20,0,28,0],[20,6,28,4,"subscriptions"],[20,22,28,20],[20,24,28,0],[21,0,29,0],[21,6,29,4,"updatesEnabled"],[21,23,29,21],[21,28,29,0],[22,0,49,0],[22,6,49,6,"Geolocation"],[22,20,49,20],[23,0,56,2,"setRNConfiguration"],[23,24,56,22],[23,52,56,31,"config"],[23,58,56,22],[23,60,56,57],[24,0,57,4],[24,10,57,8,"RCTLocationObserver"],[24,30,57,28,"setConfiguration"],[24,46,57,4],[24,48,57,46],[25,0,58,6,"RCTLocationObserver"],[25,28,58,26,"setConfiguration"],[25,44,58,6],[25,45,58,43,"config"],[25,51,58,6],[26,0,59,5],[27,0,60,3],[27,5,49,20],[28,0,67,2,"requestAuthorization"],[28,26,67,24],[28,58,67,35],[29,0,68,4,"RCTLocationObserver"],[29,26,68,24,"requestAuthorization"],[29,46,68,4],[30,0,69,3],[30,5,49,20],[31,0,76,2,"getCurrentPosition"],[31,24,76,22],[31,52,77,4,"geo_success"],[31,63,76,22],[31,65,78,4,"geo_error"],[31,74,76,22],[31,76,79,4,"geo_options"],[31,87,76,22],[32,0,76,22],[33,0,76,22],[34,0,76,22],[35,0,76,22],[36,0,76,22],[37,0,81,4,"invariant"],[37,24,82,6],[37,31,82,13,"geo_success"],[37,42,82,6],[37,47,82,29],[37,57,81,4],[37,59,83,6],[37,103,81,4],[38,0,85,8,"hasPermission"],[38,27,76,22],[38,30,85,24],[38,34,76,22],[40,0,76,22],[40,20,88,8,"Platform"],[40,29,88,17,"OS"],[40,31,88,8],[40,36,88,24],[40,45,88,8],[40,49,88,37,"Platform"],[40,58,88,46,"Version"],[40,65,88,37],[40,69,88,57],[40,71,76,22],[41,0,76,22],[42,0,76,22],[43,0,76,22],[45,0,76,22],[46,0,76,22],[46,46,89,28,"PermissionsAndroid"],[46,65,89,47,"check"],[46,70,89,28],[46,71,90,8,"PermissionsAndroid"],[46,90,90,27,"PERMISSIONS"],[46,101,90,8],[46,102,90,39,"ACCESS_FINE_LOCATION"],[46,122,89,28],[46,123,76,22],[48,0,76,22],[49,0,89,6,"hasPermission"],[49,27,76,22],[51,0,76,22],[51,18,92,11,"hasPermission"],[51,31,76,22],[52,0,76,22],[53,0,76,22],[54,0,76,22],[56,0,76,22],[57,0,76,22],[57,46,93,29,"PermissionsAndroid"],[57,65,93,48,"request"],[57,72,93,29],[57,73,94,10,"PermissionsAndroid"],[57,92,94,29,"PERMISSIONS"],[57,103,94,10],[57,104,94,41,"ACCESS_FINE_LOCATION"],[57,124,93,29],[57,125,76,22],[59,0,76,22],[60,0,93,14,"status"],[60,20,76,22],[61,0,96,8,"hasPermission"],[61,30,96,24,"status"],[61,41,96,35,"PermissionsAndroid"],[61,60,96,54,"RESULTS"],[61,67,96,35],[61,68,96,62,"GRANTED"],[61,75,96,8],[63,0,76,22],[64,0,99,4],[64,18,99,8,"hasPermission"],[64,31,99,4],[64,33,99,23],[65,0,100,6,"RCTLocationObserver"],[65,36,100,26,"getCurrentPosition"],[65,54,100,6],[65,55,101,8,"geo_options"],[65,70,101,23],[65,72,100,6],[65,74,102,8,"geo_success"],[65,85,100,6],[65,87,103,8,"geo_error"],[65,100,103,21,"logError"],[65,108,100,6],[66,0,105,5],[68,0,76,22],[69,0,76,22],[70,0,76,22],[71,0,76,22],[72,0,76,22],[73,0,76,22],[74,0,76,22],[74,5,49,20],[75,0,113,2,"watchPosition"],[75,19,113,17],[75,42,114,4,"success"],[75,49,113,17],[75,51,115,4,"error"],[75,56,113,17],[75,58,116,4,"options"],[75,65,113,17],[75,67,117,12],[76,0,118,4],[76,10,118,8],[76,11,118,9,"updatesEnabled"],[76,25,118,4],[76,27,118,25],[77,0,119,6,"RCTLocationObserver"],[77,28,119,26,"startObserving"],[77,42,119,6],[77,43,119,41,"options"],[77,54,119,52],[77,56,119,6],[78,0,120,6,"updatesEnabled"],[78,25,120,23],[78,29,120,6],[79,0,121,5],[81,0,122,4],[81,10,122,10,"watchID"],[81,20,122,20,"subscriptions"],[81,34,122,34,"length"],[81,40,122,4],[82,0,123,4,"subscriptions"],[82,20,123,18,"push"],[82,24,123,4],[82,25,123,23],[82,26,124,6,"LocationEventEmitter"],[82,47,124,27,"addListener"],[82,58,124,6],[82,59,124,39],[82,81,124,6],[82,83,124,63,"success"],[82,90,124,6],[82,91,123,23],[82,93,125,6,"error"],[82,101,126,10,"LocationEventEmitter"],[82,122,126,31,"addListener"],[82,133,126,10],[82,134,126,43],[82,152,126,10],[82,154,126,63,"error"],[82,159,126,10],[82,160,125,6],[82,163,127,10],[82,167,123,23],[82,168,123,4],[83,0,129,4],[83,13,129,11,"watchID"],[83,20,129,4],[84,0,130,3],[84,5,49,20],[85,0,132,2,"clearWatch"],[85,16,132,14],[85,36,132,23,"watchID"],[85,43,132,14],[85,45,132,40],[86,0,133,4],[86,10,133,10,"sub"],[86,16,133,16,"subscriptions"],[86,30,133,30,"watchID"],[86,37,133,16],[86,38,133,4],[88,0,134,4],[88,10,134,8],[88,11,134,9,"sub"],[88,14,134,4],[88,16,134,14],[89,0,137,6],[90,0,138,5],[92,0,140,4,"sub"],[92,10,140,8],[92,11,140,4],[92,13,140,11,"remove"],[92,19,140,4],[93,0,142,4],[93,10,142,10,"sub1"],[93,17,142,17,"sub"],[93,21,142,21],[93,22,142,17],[93,23,142,4],[94,0,143,4,"sub1"],[94,14,143,12,"sub1"],[94,19,143,17,"remove"],[94,25,143,12],[94,27,143,4],[95,0,144,4,"subscriptions"],[95,20,144,18,"watchID"],[95,27,144,4],[95,31,144,29,"undefined"],[95,40,144,4],[96,0,145,4],[96,10,145,8,"noWatchers"],[96,23,145,21],[96,27,145,4],[98,0,146,4],[98,11,146,9],[98,15,146,13,"ii"],[98,20,146,18],[98,21,146,4],[98,23,146,21,"ii"],[98,28,146,26,"subscriptions"],[98,42,146,40,"length"],[98,48,146,4],[98,50,146,48,"ii"],[98,54,146,4],[98,56,146,54],[99,0,147,6],[99,12,147,10,"subscriptions"],[99,26,147,24,"ii"],[99,28,147,10],[99,29,147,6],[99,31,147,29],[100,0,148,8,"noWatchers"],[100,23,148,21],[100,28,148,8],[101,0,149,7],[102,0,150,5],[104,0,151,4],[104,10,151,8,"noWatchers"],[104,20,151,4],[104,22,151,20],[105,0,152,6,"Geolocation"],[105,20,152,18,"stopObserving"],[105,33,152,6],[106,0,153,5],[107,0,154,3],[107,5,49,20],[108,0,156,2,"stopObserving"],[108,19,156,17],[108,44,156,28],[109,0,157,4],[109,10,157,8,"updatesEnabled"],[109,24,157,4],[109,26,157,24],[110,0,158,6,"RCTLocationObserver"],[110,28,158,26,"stopObserving"],[110,41,158,6],[111,0,159,6,"updatesEnabled"],[111,25,159,23],[111,30,159,6],[113,0,160,6],[113,13,160,11],[113,17,160,15,"ii"],[113,22,160,20],[113,23,160,6],[113,25,160,23,"ii"],[113,30,160,28,"subscriptions"],[113,44,160,42,"length"],[113,50,160,6],[113,52,160,50,"ii"],[113,56,160,6],[113,58,160,56],[114,0,161,8],[114,14,161,14,"sub"],[114,20,161,20,"subscriptions"],[114,34,161,34,"ii"],[114,36,161,20],[114,37,161,8],[116,0,162,8],[116,14,162,12,"sub"],[116,17,162,8],[116,19,162,17],[117,0,163,10,"warning"],[117,20,163,18],[117,25,163,10],[117,27,163,25],[117,78,163,10],[118,0,164,10,"sub"],[118,16,164,14],[118,17,164,10],[118,19,164,17,"remove"],[118,25,164,10],[119,0,166,10],[119,16,166,16,"sub1"],[119,23,166,23,"sub"],[119,27,166,27],[119,28,166,23],[119,29,166,10],[120,0,167,10,"sub1"],[120,20,167,18,"sub1"],[120,25,167,23,"remove"],[120,31,167,18],[120,33,167,10],[121,0,168,9],[122,0,169,7],[124,0,170,6,"subscriptions"],[124,24,170,22],[124,26,170,6],[125,0,171,5],[126,0,172,3],[127,0,49,20],[127,3,49,0],[128,0,175,0,"module"],[128,9,175,7,"exports"],[128,16,175,0],[128,19,175,17,"Geolocation"],[128,30,175,0]]},"type":"js/module"}]}
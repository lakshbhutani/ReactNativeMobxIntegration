{"dependencies":[{"name":"eventemitter3","isAsync":false}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, module, exports, _dependencyMap) {\n  'use strict';\n\n  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } _setPrototypeOf(subClass.prototype, superClass && superClass.prototype); if (superClass) _setPrototypeOf(subClass, superClass); }\n\n  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n  function _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\n  function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n  function _getPrototypeOf(o) { _getPrototypeOf = Object.getPrototypeOf || function _getPrototypeOf(o) { return o.__proto__; }; return _getPrototypeOf(o); }\n\n  var EventEmitter = _$$_REQUIRE(_dependencyMap[0], 'eventemitter3');\n\n  var MetroClient = function (_EventEmitter) {\n    function MetroClient(url) {\n      var _this;\n\n      _classCallCheck(this, MetroClient);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(MetroClient).call(this));\n      _this._url = url;\n      return _this;\n    }\n\n    _createClass(MetroClient, [{\n      key: \"enable\",\n      value: function enable() {\n        var _this2 = this;\n\n        if (this._ws) {\n          this.disable();\n        }\n\n        this._ws = new global.WebSocket(this._url);\n\n        this._ws.onerror = function (error) {\n          _this2.emit('connection-error', error);\n        };\n\n        this._ws.onclose = function () {\n          _this2.emit('close');\n        };\n\n        this._ws.onmessage = function (message) {\n          var data = JSON.parse(message.data);\n\n          switch (data.type) {\n            case 'update-start':\n              _this2.emit('update-start');\n\n              break;\n\n            case 'update':\n              var _data$body = data.body;\n              var modules = _data$body.modules,\n                  sourceMappingURLs = _data$body.sourceMappingURLs,\n                  sourceURLs = _data$body.sourceURLs;\n\n              _this2.emit('update');\n\n              modules.forEach(function (_ref, i) {\n                var id = _ref.id,\n                    code = _ref.code;\n                code += '\\n\\n' + sourceMappingURLs[i];\n                var injectFunction = typeof global.nativeInjectHMRUpdate === 'function' ? global.nativeInjectHMRUpdate : eval;\n                injectFunction(code, sourceURLs[i]);\n              });\n              break;\n\n            case 'update-done':\n              _this2.emit('update-done');\n\n              break;\n\n            case 'error':\n              _this2.emit('error', data.body);\n\n              break;\n\n            default:\n              _this2.emit('error', {\n                type: 'unknown-message',\n                message: data\n              });\n\n          }\n        };\n      }\n    }, {\n      key: \"disable\",\n      value: function disable() {\n        if (this._ws) {\n          this._ws.close();\n\n          this._ws = undefined;\n        }\n      }\n    }]);\n\n    _inherits(MetroClient, _EventEmitter);\n\n    return MetroClient;\n  }(EventEmitter);\n\n  module.exports = MetroClient;\n});","map":[[2,0,10,0],[20,0,12,0],[20,6,12,6,"EventEmitter"],[20,21,12,21,"require"],[20,52,12,29],[20,67,12,21],[20,68,12,0],[22,6,18,6,"MetroClient"],[22,17],[23,0,22,2],[23,25,22,14,"url"],[23,28,22,2],[23,30,22,19],[24,0,22,19],[26,0,22,19],[28,0,23,4],[29,0,24,4],[29,12,24,9,"_url"],[29,16,24,4],[29,19,24,16,"url"],[29,22,24,4],[30,0,22,19],[31,0,25,3],[35,31,27,11],[36,0,27,11],[38,0,28,4],[38,12,28,8],[38,17,28,13,"_ws"],[38,20,28,4],[38,22,28,18],[39,0,29,6],[39,15,29,11,"disable"],[39,22,29,6],[40,0,30,5],[42,0,34,4],[42,13,34,9,"_ws"],[42,16,34,4],[42,19,34,15],[42,23,34,19,"global"],[42,30,34,26,"WebSocket"],[42,39,34,15],[42,40,34,36],[42,45,34,41,"_url"],[42,49,34,15],[42,50,34,4],[44,0,35,4],[44,13,35,9,"_ws"],[44,16,35,4],[44,17,35,13,"onerror"],[44,24,35,4],[44,27,35,23],[44,44,35,32],[45,0,36,6],[45,17,36,11,"emit"],[45,21,36,6],[45,22,36,16],[45,40,36,6],[45,42,36,36,"error"],[45,47,36,6],[46,0,37,5],[46,9,35,4],[48,0,38,4],[48,13,38,9,"_ws"],[48,16,38,4],[48,17,38,13,"onclose"],[48,24,38,4],[48,27,38,23],[48,39,38,29],[49,0,39,6],[49,17,39,11,"emit"],[49,21,39,6],[49,22,39,16],[49,29,39,6],[50,0,40,5],[50,9,38,4],[52,0,41,4],[52,13,41,9,"_ws"],[52,16,41,4],[52,17,41,13,"onmessage"],[52,26,41,4],[52,29,41,25],[52,48,41,36],[53,0,42,6],[53,14,42,12,"data"],[53,21,42,19,"JSON"],[53,26,42,24,"parse"],[53,31,42,19],[53,32,42,30,"message"],[53,40,42,38,"data"],[53,44,42,19],[53,45,42,6],[55,0,43,6],[55,18,43,14,"data"],[55,23,43,19,"type"],[55,27,43,6],[56,0,44,8],[56,17,44,13],[56,31,44,8],[57,0,45,10],[57,21,45,15,"emit"],[57,25,45,10],[57,26,45,20],[57,40,45,10],[59,0,46,10],[61,0,48,8],[61,17,48,13],[61,25,48,8],[62,0,48,22],[62,18,48,26,"_data$body"],[62,31,49,10,"data"],[62,36,49,15,"body"],[62,40,48,22],[63,0,49,20],[63,18,49,26,"modules"],[63,28,49,36,"_data$body"],[63,39,49,47,"modules"],[63,46,49,20],[64,0,49,20],[64,18,49,55,"sourceMappingURLs"],[64,38,49,75,"_data$body"],[64,49,49,86,"sourceMappingURLs"],[64,66,49,20],[65,0,49,20],[65,18,49,104,"sourceURLs"],[65,31,49,117,"_data$body"],[65,42,49,128,"sourceURLs"],[65,52,49,20],[67,0,51,10],[67,21,51,15,"emit"],[67,25,51,10],[67,26,51,20],[67,34,51,10],[69,0,52,10,"modules"],[69,22,52,18,"forEach"],[69,29,52,10],[69,30,52,26],[69,40,52,27,"_ref"],[69,44,52,26],[69,46,52,33,"i"],[69,47,52,26],[69,49,52,39],[70,0,52,40],[70,20,52,44,"id"],[70,25,52,49,"_ref"],[70,30,52,54,"id"],[70,32,52,40],[71,0,52,40],[71,20,52,57,"code"],[71,27,52,64,"_ref"],[71,32,52,69,"code"],[71,36,52,40],[72,0,53,12,"code"],[72,24,53,20],[72,33,53,29,"sourceMappingURLs"],[72,51,53,47,"i"],[72,52,53,29],[72,53,53,12],[73,0,58,12],[73,20,58,18,"injectFunction"],[73,37,59,12],[73,44,59,19,"global"],[73,51,59,26,"nativeInjectHMRUpdate"],[73,72,59,12],[73,77,59,52],[73,87,59,12],[73,90,60,12,"global"],[73,97,60,19,"nativeInjectHMRUpdate"],[73,118,59,12],[73,121,61,12,"eval"],[73,125,58,12],[74,0,63,12,"injectFunction"],[74,31,63,27,"code"],[74,35,63,12],[74,37,63,33,"sourceURLs"],[74,48,63,44,"i"],[74,49,63,33],[74,50,63,12],[75,0,64,11],[75,15,52,10],[76,0,65,10],[78,0,67,8],[78,17,67,13],[78,30,67,8],[79,0,68,10],[79,21,68,15,"emit"],[79,25,68,10],[79,26,68,20],[79,39,68,10],[81,0,69,10],[83,0,71,8],[83,17,71,13],[83,24,71,8],[84,0,72,10],[84,21,72,15,"emit"],[84,25,72,10],[84,26,72,20],[84,33,72,10],[84,35,72,29,"data"],[84,40,72,34,"body"],[84,44,72,10],[86,0,73,10],[88,0,75,8],[89,0,76,10],[89,21,76,15,"emit"],[89,25,76,10],[89,26,76,20],[89,33,76,10],[89,35,76,29],[90,0,76,31,"type"],[90,22,76,37],[90,39,76,29],[91,0,76,56,"message"],[91,25,76,65,"data"],[92,0,76,29],[92,15,76,10],[94,0,43,6],[95,0,78,5],[95,9,41,4],[96,0,79,3],[99,32,81,12],[100,0,82,4],[100,12,82,8],[100,17,82,13,"_ws"],[100,20,82,4],[100,22,82,18],[101,0,83,6],[101,15,83,11,"_ws"],[101,18,83,6],[101,19,83,15,"close"],[101,24,83,6],[103,0,84,6],[103,15,84,11,"_ws"],[103,18,84,6],[103,21,84,17,"undefined"],[103,30,84,6],[104,0,85,5],[105,0,86,3],[111,4,18,26,"EventEmitter"],[111,16],[113,0,89,0,"module"],[113,9,89,7,"exports"],[113,16,89,0],[113,19,89,17,"MetroClient"],[113,30,89,0]]},"type":"js/module"}]}
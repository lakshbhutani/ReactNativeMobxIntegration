{"dependencies":[{"name":"PixelRatio","isAsync":false},{"name":"Platform","isAsync":false},{"name":"../../local-cli/bundle/assetPathUtils","isAsync":false},{"name":"fbjs/lib/invariant","isAsync":false}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, module, exports, _dependencyMap) {\n  'use strict';\n\n  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n  var PixelRatio = _$$_REQUIRE(_dependencyMap[0], 'PixelRatio');\n\n  var Platform = _$$_REQUIRE(_dependencyMap[1], 'Platform');\n\n  var assetPathUtils = _$$_REQUIRE(_dependencyMap[2], '../../local-cli/bundle/assetPathUtils');\n\n  var invariant = _$$_REQUIRE(_dependencyMap[3], 'fbjs/lib/invariant');\n\n  function getScaledAssetPath(asset) {\n    var scale = AssetSourceResolver.pickScale(asset.scales, PixelRatio.get());\n    var scaleSuffix = scale === 1 ? '' : '@' + scale + 'x';\n    var assetDir = assetPathUtils.getBasePath(asset);\n    return assetDir + '/' + asset.name + scaleSuffix + '.' + asset.type;\n  }\n\n  function getAssetPathInDrawableFolder(asset) {\n    var scale = AssetSourceResolver.pickScale(asset.scales, PixelRatio.get());\n    var drawbleFolder = assetPathUtils.getAndroidResourceFolderName(asset, scale);\n    var fileName = assetPathUtils.getAndroidResourceIdentifier(asset);\n    return drawbleFolder + '/' + fileName + '.' + asset.type;\n  }\n\n  var AssetSourceResolver = function () {\n    function AssetSourceResolver(serverUrl, jsbundleUrl, asset) {\n      _classCallCheck(this, AssetSourceResolver);\n\n      this.serverUrl = serverUrl;\n      this.jsbundleUrl = jsbundleUrl;\n      this.asset = asset;\n    }\n\n    _createClass(AssetSourceResolver, [{\n      key: \"isLoadedFromServer\",\n      value: function isLoadedFromServer() {\n        return !!this.serverUrl;\n      }\n    }, {\n      key: \"isLoadedFromFileSystem\",\n      value: function isLoadedFromFileSystem() {\n        return !!(this.jsbundleUrl && this.jsbundleUrl.startsWith('file://'));\n      }\n    }, {\n      key: \"defaultAsset\",\n      value: function defaultAsset() {\n        if (this.isLoadedFromServer()) {\n          return this.assetServerURL();\n        }\n\n        if (Platform.OS === 'android') {\n          return this.isLoadedFromFileSystem() ? this.drawableFolderInBundle() : this.resourceIdentifierWithoutScale();\n        } else {\n          return this.scaledAssetURLNearBundle();\n        }\n      }\n    }, {\n      key: \"assetServerURL\",\n      value: function assetServerURL() {\n        invariant(!!this.serverUrl, 'need server to load from');\n        return this.fromSource(this.serverUrl + getScaledAssetPath(this.asset) + '?platform=' + Platform.OS + '&hash=' + this.asset.hash);\n      }\n    }, {\n      key: \"scaledAssetPath\",\n      value: function scaledAssetPath() {\n        return this.fromSource(getScaledAssetPath(this.asset));\n      }\n    }, {\n      key: \"scaledAssetURLNearBundle\",\n      value: function scaledAssetURLNearBundle() {\n        var path = this.jsbundleUrl || 'file://';\n        return this.fromSource(path + getScaledAssetPath(this.asset));\n      }\n    }, {\n      key: \"resourceIdentifierWithoutScale\",\n      value: function resourceIdentifierWithoutScale() {\n        invariant(Platform.OS === 'android', 'resource identifiers work on Android');\n        return this.fromSource(assetPathUtils.getAndroidResourceIdentifier(this.asset));\n      }\n    }, {\n      key: \"drawableFolderInBundle\",\n      value: function drawableFolderInBundle() {\n        var path = this.jsbundleUrl || 'file://';\n        return this.fromSource(path + getAssetPathInDrawableFolder(this.asset));\n      }\n    }, {\n      key: \"fromSource\",\n      value: function fromSource(source) {\n        return {\n          __packager_asset: true,\n          width: this.asset.width,\n          height: this.asset.height,\n          uri: source,\n          scale: AssetSourceResolver.pickScale(this.asset.scales, PixelRatio.get())\n        };\n      }\n    }], [{\n      key: \"pickScale\",\n      value: function pickScale(scales, deviceScale) {\n        for (var i = 0; i < scales.length; i++) {\n          if (scales[i] >= deviceScale) {\n            return scales[i];\n          }\n        }\n\n        return scales[scales.length - 1] || 1;\n      }\n    }]);\n\n    return AssetSourceResolver;\n  }();\n\n  module.exports = AssetSourceResolver;\n});","map":[[2,0,10,0],[10,0,22,0],[10,6,22,6,"PixelRatio"],[10,19,22,19,"require"],[10,50,22,27],[10,62,22,19],[10,63,22,0],[12,0,23,0],[12,6,23,6,"Platform"],[12,17,23,17,"require"],[12,48,23,25],[12,58,23,17],[12,59,23,0],[14,0,25,0],[14,6,25,6,"assetPathUtils"],[14,23,25,23,"require"],[14,54,25,31],[14,93,25,23],[14,94,25,0],[16,0,26,0],[16,6,26,6,"invariant"],[16,18,26,18,"require"],[16,49,26,26],[16,69,26,18],[16,70,26,0],[18,0,31,0],[18,11,31,9,"getScaledAssetPath"],[18,29,31,0],[18,30,31,28,"asset"],[18,35,31,0],[18,37,31,43],[19,0,32,2],[19,8,32,8,"scale"],[19,16,32,16,"AssetSourceResolver"],[19,36,32,36,"pickScale"],[19,45,32,16],[19,46,32,46,"asset"],[19,52,32,52,"scales"],[19,58,32,16],[19,60,32,60,"PixelRatio"],[19,71,32,71,"get"],[19,74,32,60],[19,76,32,16],[19,77,32,2],[20,0,33,2],[20,8,33,8,"scaleSuffix"],[20,22,33,22,"scale"],[20,32,33,32],[20,33,33,22],[20,36,33,36],[20,38,33,22],[20,41,33,41],[20,47,33,47,"scale"],[20,52,33,41],[20,55,33,55],[20,58,33,2],[21,0,34,2],[21,8,34,8,"assetDir"],[21,19,34,19,"assetPathUtils"],[21,34,34,34,"getBasePath"],[21,45,34,19],[21,46,34,46,"asset"],[21,51,34,19],[21,52,34,2],[22,0,35,2],[22,11,35,9,"assetDir"],[22,22,35,20],[22,25,35,9],[22,28,35,26,"asset"],[22,34,35,32,"name"],[22,38,35,9],[22,41,35,39,"scaleSuffix"],[22,52,35,9],[22,55,35,53],[22,58,35,9],[22,61,35,59,"asset"],[22,67,35,65,"type"],[22,71,35,2],[23,0,36,1],[25,0,41,0],[25,11,41,9,"getAssetPathInDrawableFolder"],[25,39,41,0],[25,40,41,38,"asset"],[25,45,41,0],[25,47,41,53],[26,0,42,2],[26,8,42,8,"scale"],[26,16,42,16,"AssetSourceResolver"],[26,36,42,36,"pickScale"],[26,45,42,16],[26,46,42,46,"asset"],[26,52,42,52,"scales"],[26,58,42,16],[26,60,42,60,"PixelRatio"],[26,71,42,71,"get"],[26,74,42,60],[26,76,42,16],[26,77,42,2],[27,0,43,2],[27,8,43,8,"drawbleFolder"],[27,24,43,24,"assetPathUtils"],[27,39,43,39,"getAndroidResourceFolderName"],[27,67,43,24],[27,68,44,4,"asset"],[27,73,43,24],[27,75,45,4,"scale"],[27,80,43,24],[27,81,43,2],[28,0,47,2],[28,8,47,8,"fileName"],[28,19,47,19,"assetPathUtils"],[28,34,47,34,"getAndroidResourceIdentifier"],[28,62,47,19],[28,63,47,63,"asset"],[28,68,47,19],[28,69,47,2],[29,0,48,2],[29,11,48,9,"drawbleFolder"],[29,27,48,25],[29,30,48,9],[29,33,48,31,"fileName"],[29,41,48,9],[29,44,48,42],[29,47,48,9],[29,50,48,48,"asset"],[29,56,48,54,"type"],[29,60,48,2],[30,0,49,1],[32,6,51,6,"AssetSourceResolver"],[32,25],[33,0,58,2],[33,33,58,14,"serverUrl"],[33,42,58,2],[33,44,58,34,"jsbundleUrl"],[33,55,58,2],[33,57,58,56,"asset"],[33,62,58,2],[33,64,58,78],[34,0,58,78],[36,0,59,4],[36,11,59,9,"serverUrl"],[36,20,59,4],[36,23,59,21,"serverUrl"],[36,32,59,4],[37,0,60,4],[37,11,60,9,"jsbundleUrl"],[37,22,60,4],[37,25,60,23,"jsbundleUrl"],[37,36,60,4],[38,0,61,4],[38,11,61,9,"asset"],[38,16,61,4],[38,19,61,17,"asset"],[38,24,61,4],[39,0,62,3],[43,43,64,32],[44,0,65,4],[44,15,65,11],[44,16,65,12],[44,17,65,13],[44,22,65,18,"serverUrl"],[44,31,65,4],[45,0,66,3],[48,47,68,36],[49,0,69,4],[49,15,69,11],[49,16,69,12],[49,18,69,14],[49,23,69,19,"jsbundleUrl"],[49,34,69,14],[49,38,69,34],[49,43,69,39,"jsbundleUrl"],[49,54,69,34],[49,55,69,51,"startsWith"],[49,65,69,34],[49,66,69,62],[49,75,69,34],[49,76,69,12],[49,77,69,4],[50,0,70,3],[53,37,72,38],[54,0,73,4],[54,12,73,8],[54,17,73,13,"isLoadedFromServer"],[54,35,73,8],[54,37,73,4],[54,39,73,35],[55,0,74,6],[55,17,74,13],[55,22,74,18,"assetServerURL"],[55,36,74,13],[55,38,74,6],[56,0,75,5],[58,0,77,4],[58,12,77,8,"Platform"],[58,21,77,17,"OS"],[58,23,77,8],[58,28,77,24],[58,37,77,4],[58,39,77,35],[59,0,78,6],[59,17,78,13],[59,22,78,18,"isLoadedFromFileSystem"],[59,44,78,13],[59,49,79,10],[59,54,79,15,"drawableFolderInBundle"],[59,76,79,10],[59,78,78,13],[59,81,80,10],[59,86,80,15,"resourceIdentifierWithoutScale"],[59,116,80,10],[59,118,78,6],[60,0,81,5],[60,9,77,4],[60,15,81,11],[61,0,82,6],[61,17,82,13],[61,22,82,18,"scaledAssetURLNearBundle"],[61,46,82,13],[61,48,82,6],[62,0,83,5],[63,0,84,3],[66,39,90,40],[67,0,91,4,"invariant"],[67,18,91,14],[67,19,91,15],[67,20,91,16],[67,25,91,21,"serverUrl"],[67,34,91,4],[67,36,91,32],[67,62,91,4],[68,0,92,4],[68,15,92,11],[68,20,92,16,"fromSource"],[68,30,92,11],[68,31,93,6],[68,36,93,11,"serverUrl"],[68,45,93,6],[68,48,94,8,"getScaledAssetPath"],[68,67,94,27],[68,72,94,32,"asset"],[68,77,94,8],[68,78,93,6],[68,81,95,8],[68,93,93,6],[68,96,96,8,"Platform"],[68,105,96,17,"OS"],[68,107,93,6],[68,110,97,8],[68,118,93,6],[68,121,98,8],[68,126,98,13,"asset"],[68,131,98,8],[68,132,98,19,"hash"],[68,136,92,11],[68,137,92,4],[69,0,100,3],[72,40,106,41],[73,0,107,4],[73,15,107,11],[73,20,107,16,"fromSource"],[73,30,107,11],[73,31,107,27,"getScaledAssetPath"],[73,50,107,46],[73,55,107,51,"asset"],[73,60,107,27],[73,61,107,11],[73,62,107,4],[74,0,108,3],[77,49,114,50],[78,0,115,4],[78,12,115,10,"path"],[78,19,115,17],[78,24,115,22,"jsbundleUrl"],[78,35,115,17],[78,39,115,37],[78,48,115,4],[79,0,116,4],[79,15,116,11],[79,20,116,16,"fromSource"],[79,30,116,11],[79,31,116,27,"path"],[79,38,116,34,"getScaledAssetPath"],[79,57,116,53],[79,62,116,58,"asset"],[79,67,116,34],[79,68,116,11],[79,69,116,4],[80,0,117,3],[83,55,125,56],[84,0,126,4,"invariant"],[84,18,127,6,"Platform"],[84,27,127,15,"OS"],[84,29,127,6],[84,34,127,22],[84,43,126,4],[84,45,128,6],[84,83,126,4],[85,0,130,4],[85,15,130,11],[85,20,130,16,"fromSource"],[85,30,130,11],[85,31,131,6,"assetPathUtils"],[85,46,131,21,"getAndroidResourceIdentifier"],[85,74,131,6],[85,75,131,50],[85,80,131,55,"asset"],[85,85,131,6],[85,86,130,11],[85,87,130,4],[86,0,133,3],[89,47,140,48],[90,0,141,4],[90,12,141,10,"path"],[90,19,141,17],[90,24,141,22,"jsbundleUrl"],[90,35,141,17],[90,39,141,37],[90,48,141,4],[91,0,142,4],[91,15,142,11],[91,20,142,16,"fromSource"],[91,30,142,11],[91,31,142,27,"path"],[91,38,142,34,"getAssetPathInDrawableFolder"],[91,67,142,63],[91,72,142,68,"asset"],[91,77,142,34],[91,78,142,11],[91,79,142,4],[92,0,143,3],[95,33,145,13,"source"],[95,39],[95,41,145,50],[96,0,146,4],[96,15,146,11],[97,0,147,6,"__packager_asset"],[97,28,147,24],[97,32,146,11],[98,0,148,6,"width"],[98,17,148,13],[98,22,148,18,"asset"],[98,27,148,13],[98,28,148,24,"width"],[98,33,146,11],[99,0,149,6,"height"],[99,18,149,14],[99,23,149,19,"asset"],[99,28,149,14],[99,29,149,25,"height"],[99,35,146,11],[100,0,150,6,"uri"],[100,15,150,11,"source"],[100,21,146,11],[101,0,151,6,"scale"],[101,17,151,13,"AssetSourceResolver"],[101,37,151,33,"pickScale"],[101,46,151,13],[101,47,151,43],[101,52,151,48,"asset"],[101,57,151,43],[101,58,151,54,"scales"],[101,64,151,13],[101,66,151,62,"PixelRatio"],[101,77,151,73,"get"],[101,80,151,62],[101,82,151,13],[102,0,146,11],[102,9,146,4],[103,0,153,3],[106,32,155,19,"scales"],[106,38],[106,40,155,42,"deviceScale"],[106,51],[106,53,155,71],[107,0,157,4],[107,13,157,9],[107,17,157,13,"i"],[107,21,157,17],[107,22,157,4],[107,24,157,20,"i"],[107,28,157,24,"scales"],[107,35,157,31,"length"],[107,41,157,4],[107,43,157,39,"i"],[107,46,157,4],[107,48,157,44],[108,0,158,6],[108,14,158,10,"scales"],[108,21,158,17,"i"],[108,22,158,10],[108,27,158,23,"deviceScale"],[108,38,158,6],[108,40,158,36],[109,0,159,8],[109,19,159,15,"scales"],[109,26,159,22,"i"],[109,27,159,15],[109,28,159,8],[110,0,160,7],[111,0,161,5],[113,0,166,4],[113,15,166,11,"scales"],[113,22,166,18,"scales"],[113,29,166,25,"length"],[113,35,166,18],[113,38,166,34],[113,39,166,11],[113,44,166,40],[113,45,166,4],[114,0,167,3],[120,0,170,0,"module"],[120,9,170,7,"exports"],[120,16,170,0],[120,19,170,17,"AssetSourceResolver"],[120,38,170,0]]},"type":"js/module"}]}
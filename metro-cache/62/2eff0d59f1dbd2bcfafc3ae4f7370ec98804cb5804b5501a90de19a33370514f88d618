{"dependencies":[{"name":"fbjs/lib/invariant","isAsync":false}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, module, exports, _dependencyMap) {\n  'use strict';\n\n  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n  var invariant = _$$_REQUIRE(_dependencyMap[0], 'fbjs/lib/invariant');\n\n  var EventHolder = function () {\n    function EventHolder() {\n      _classCallCheck(this, EventHolder);\n\n      this._heldEvents = {};\n      this._currentEventKey = null;\n    }\n\n    _createClass(EventHolder, [{\n      key: \"holdEvent\",\n      value: function holdEvent(eventType) {\n        this._heldEvents[eventType] = this._heldEvents[eventType] || [];\n        var eventsOfType = this._heldEvents[eventType];\n        var key = {\n          eventType: eventType,\n          index: eventsOfType.length\n        };\n\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        eventsOfType.push(args);\n        return key;\n      }\n    }, {\n      key: \"emitToListener\",\n      value: function emitToListener(eventType, listener, context) {\n        var _this = this;\n\n        var eventsOfType = this._heldEvents[eventType];\n\n        if (!eventsOfType) {\n          return;\n        }\n\n        var origEventKey = this._currentEventKey;\n        eventsOfType.forEach(function (eventHeld, index) {\n          if (!eventHeld) {\n            return;\n          }\n\n          _this._currentEventKey = {\n            eventType: eventType,\n            index: index\n          };\n          listener.apply(context, eventHeld);\n        });\n        this._currentEventKey = origEventKey;\n      }\n    }, {\n      key: \"releaseCurrentEvent\",\n      value: function releaseCurrentEvent() {\n        invariant(this._currentEventKey !== null, 'Not in an emitting cycle; there is no current event');\n        this._currentEventKey && this.releaseEvent(this._currentEventKey);\n      }\n    }, {\n      key: \"releaseEvent\",\n      value: function releaseEvent(token) {\n        delete this._heldEvents[token.eventType][token.index];\n      }\n    }, {\n      key: \"releaseEventType\",\n      value: function releaseEventType(type) {\n        this._heldEvents[type] = [];\n      }\n    }]);\n\n    return EventHolder;\n  }();\n\n  module.exports = EventHolder;\n});","map":[[2,0,11,0],[10,0,13,0],[10,6,13,6,"invariant"],[10,18,13,18,"require"],[10,49,13,26],[10,69,13,18],[10,70,13,0],[12,6,15,6,"EventHolder"],[12,17],[13,0,19,2],[13,27,19,16],[14,0,19,16],[16,0,20,4],[16,11,20,9,"_heldEvents"],[16,22,20,4],[16,25,20,23],[16,27,20,4],[17,0,21,4],[17,11,21,9,"_currentEventKey"],[17,27,21,4],[17,30,21,28],[17,34,21,4],[18,0,22,3],[22,32,45,12,"eventType"],[22,41],[22,43,45,45],[23,0,46,4],[23,13,46,9,"_heldEvents"],[23,24,46,4],[23,25,46,21,"eventType"],[23,34,46,4],[23,38,46,34],[23,43,46,39,"_heldEvents"],[23,54,46,34],[23,55,46,51,"eventType"],[23,64,46,34],[23,69,46,65],[23,71,46,4],[24,0,47,4],[24,12,47,10,"eventsOfType"],[24,27,47,25],[24,32,47,30,"_heldEvents"],[24,43,47,25],[24,44,47,42,"eventType"],[24,53,47,25],[24,54,47,4],[25,0,48,4],[25,12,48,10,"key"],[25,18,48,16],[26,0,49,6,"eventType"],[26,21,49,17,"eventType"],[26,30,48,16],[27,0,50,6,"index"],[27,17,50,13,"eventsOfType"],[27,30,50,26,"length"],[28,0,48,16],[28,9,48,4],[30,0,45,45],[30,42,45,34,"args"],[30,46,45,45],[31,0,45,34,"args"],[31,14,45,45],[32,0,45,45],[34,0,52,4,"eventsOfType"],[34,21,52,17,"push"],[34,25,52,4],[34,26,52,22,"args"],[34,30,52,4],[35,0,53,4],[35,15,53,11,"key"],[35,18,53,4],[36,0,54,3],[39,37,64,17,"eventType"],[39,46],[39,48,64,37,"listener"],[39,56],[39,58,64,57,"context"],[39,65],[39,67,64,75],[40,0,64,75],[42,0,65,4],[42,12,65,10,"eventsOfType"],[42,27,65,25],[42,32,65,30,"_heldEvents"],[42,43,65,25],[42,44,65,42,"eventType"],[42,53,65,25],[42,54,65,4],[44,0,66,4],[44,12,66,8],[44,13,66,9,"eventsOfType"],[44,25,66,4],[44,27,66,23],[45,0,67,6],[46,0,68,5],[48,0,69,4],[48,12,69,10,"origEventKey"],[48,27,69,25],[48,32,69,30,"_currentEventKey"],[48,48,69,4],[49,0,70,4,"eventsOfType"],[49,21,70,17,"forEach"],[49,28,70,4],[49,29,70,25],[49,39,70,37,"eventHeld"],[49,48,70,25],[49,50,70,59,"index"],[49,55,70,25],[49,57,70,69],[50,0,71,6],[50,14,71,10],[50,15,71,11,"eventHeld"],[50,24,71,6],[50,26,71,22],[51,0,72,8],[52,0,73,7],[54,0,74,6],[54,16,74,11,"_currentEventKey"],[54,32,74,6],[54,35,74,30],[55,0,75,8,"eventType"],[55,23,75,19,"eventType"],[55,32,74,30],[56,0,76,8,"index"],[56,19,76,15,"index"],[57,0,74,30],[57,11,74,6],[58,0,78,6,"listener"],[58,19,78,15,"apply"],[58,24,78,6],[58,25,78,21,"context"],[58,32,78,6],[58,34,78,30,"eventHeld"],[58,43,78,6],[59,0,79,5],[59,9,70,4],[60,0,80,4],[60,13,80,9,"_currentEventKey"],[60,29,80,4],[60,32,80,28,"origEventKey"],[60,44,80,4],[61,0,81,3],[64,44,91,24],[65,0,92,4,"invariant"],[65,18,93,6],[65,23,93,11,"_currentEventKey"],[65,39,93,6],[65,44,93,32],[65,48,92,4],[65,50,94,6],[65,103,92,4],[66,0,96,4],[66,13,96,9,"_currentEventKey"],[66,29,96,4],[66,33,96,29],[66,38,96,34,"releaseEvent"],[66,50,96,29],[66,51,96,47],[66,56,96,52,"_currentEventKey"],[66,72,96,29],[66,73,96,4],[67,0,97,3],[70,35,105,15,"token"],[70,40],[70,42,105,30],[71,0,106,4],[71,15,106,11],[71,20,106,16,"_heldEvents"],[71,31,106,11],[71,32,106,28,"token"],[71,38,106,34,"eventType"],[71,47,106,11],[71,49,106,45,"token"],[71,55,106,51,"index"],[71,60,106,11],[71,61,106,4],[72,0,107,3],[75,39,114,19,"type"],[75,43],[75,45,114,33],[76,0,115,4],[76,13,115,9,"_heldEvents"],[76,24,115,4],[76,25,115,21,"type"],[76,29,115,4],[76,33,115,29],[76,35,115,4],[77,0,116,3],[83,0,119,0,"module"],[83,9,119,7,"exports"],[83,16,119,0],[83,19,119,17,"EventHolder"],[83,30,119,0]]},"type":"js/module"}]}